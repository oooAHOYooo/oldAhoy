<!DOCTYPE html> 
<html lang="en"> 
  
<head> 
    <meta charset="UTF-8" /> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
    <meta name="viewport" content= 
        "width=device-width, initial-scale=1.0" /> 
  
    <script src= 
"https://www.gstatic.com/firebasejs/8.2.7/firebase-app.js"> 
    </script> 
  
    <script src= 
"https://www.gstatic.com/firebasejs/8.2.7/firebase-auth.js"> 
    </script> 
      
    <script src="form.js"></script> 
    <title>Login System | Ahoy Indie Media </title> 
<link rel="stylesheet" href="./loginPage.css">
<style>
    /* ...existing styles... */

    #usernameDisplay {
        font-size: 24px;
        text-align: center;
        margin-top: 20px;
    }
</style>
</head> 
  
<body> 
    <body> 
        <div class="formContainer"> 
            <div id="formDiv">
                <div style="display: flex; justify-content: center; align-items: center; flex-direction: column;">
                    <img src="../assets/u_ahoy23.png" alt="logo" width="250px" height="auto" style="filter:invert(1);"">
                    <div id="usernameDisplay" class="hidden"></div> <!-- New div for displaying username -->

                    <p class="small">Login or create an account to Ahoy Indie Media</p>
                </div>
                <input type="email" placeholder="create account with via e-mail" id="email" /> 
                <br /> 
                <input type="password" placeholder="and a password of your liking" id="password" /> 
                <br /> 
                
                <button onclick="signUp()" id="signUp">Create an Ahoy Indie Media Account</button> 
                <button onclick="signIn()" id="signIp"> 
                    Login
                </button> 
            </div>
            <button onclick="signOut()" id="signOut">SignOut</button>
        <a href="account.html"><button id="goToAccount">Go to Account</button></a>
        <a href="../index.html">Back Home</a>
            <a href="account.html"><button id="goToAccount">Go to Account</button></a>
            <a href="../index.html">Back Home</a>
        </div> 

    <script>
          
        // Initialize Firebase here

        firebase.auth().onAuthStateChanged((user) => {
            var formDiv = document.getElementById("formDiv");
            var signOutButton = document.getElementById("signOut");
            var goToAccountButton = document.getElementById("goToAccount");
            var usernameDisplay = document.getElementById("usernameDisplay"); // New variable for username display

            if (user) {
                var email = user.email;

                formDiv.style.display = "none";
                signOutButton.style.display = "block";
                goToAccountButton.style.display = "block";

                usernameDisplay.textContent = "Hiiiii " + email; // Set username text
                usernameDisplay.classList.remove('hidden'); // Show username display
            } else {
                formDiv.style.display = "block";
                signOutButton.style.display = "none";
                goToAccountButton.style.display = "none";

                usernameDisplay.classList.add('hidden'); // Hide username display
            }
        });

        // Your existing signUp, signIn, and signOut functions
    </script>
    </script>
    <script>
        // Active user to homepage 
firebase.auth().onAuthStateChanged((user) => { 
  var formDiv = document.getElementById("formDiv");
  var signOutButton = document.getElementById("signOut");
  var goToAccountButton = document.getElementById("goToAccount");

  if (user) { 
    var email = user.email; 
    alert("Active user " + email);


    // Hide form and show SignOut and GoToAccount buttons
    formDiv.style.display = "none";
    signOutButton.style.display = "block";
    goToAccountButton.style.display = "block";
  } else { 
    alert("No Active user Found"); 

    // Show form and hide SignOut and GoToAccount buttons
    formDiv.style.display = "block";
    signOutButton.style.display = "none";
    goToAccountButton.style.display = "none";
  } 
}); 
    </script>
</body> 
  
</html> 