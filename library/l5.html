<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ahoy Indie Media</title>
    <script type="text/javascript" src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"></script>
    <link rel="stylesheet" href="./l5mobile.css">
    <link rel="stylesheet" href="./l5.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="libraryGamesSelect.css">

</head>

<body>

    <header class="splash-header full-width">
        <a href="https://ahoy.ooo"><img src="../assets/u_ahoy23.png"></a>
    </header>

    <style>

    </style>
<!-- FEATURED SONGS -->
<section>
    <div class="sectionHeader">
    <p>Featured Monthly</p></div>
    <table id="FeaturedSongs">
        <thead>
            <tr>
                <th>Artist</th>
                <th>Song Title</th>
                
            </tr>
            <tbody id="featuredSongs">

            </tbody>
        </thead>
    </table>
</section>

    <!-- Library -->
    <section>
        <div class="sectionHeader">
        <p>All Songs</p></div>
        <table id="libraryTable">
            <thead>
                <tr>
                    <th>+ Que</a></th>
                    <th>Artist</th>
                    <th>Song Title</th>
                    <th>Like</th>
                    <th>Play</th>
                </tr>
            </thead>
            <tbody id="songList">
                <!-- Songs will be populated from JSON here -->
            </tbody>
        </table>
    </section>


<style>
    .dragon {
        width:100%;
        display:flex;
        flex-direction:column;

    }

    @media only screen and (max-width: 600px) {
        .dragon {
            width:100%;
            display:flex;
            flex-direction: row;
        }
    }
</style>


<div class="dragon">
    <!-- Favorite Songs -->
    <section id="favoritesSection card">
        <h2>Favorite Songs</h2>
        <table>
            <thead>
                <tr>
                    <th>Artist</th>
                    <th>Song Title</th>
                    <th>Play</th>
                    <th>Remove from Favorites</th>
                    <th>Add to Playlist</th>
                    <th>Add to Queue</th>
                </tr>
            </thead>
            <tbody id="favoritesList">
                <!-- Songs will be populated from the favorites array here -->
            </tbody>
        </table>
    </section>




    <!-- Playlists -->
    <!-- 
    <section id="playlistSection card">
        <h2>Your Playlist</h2>
        <p>Add songs to a playlist and then burn them to a cd!</p>
        <input type="text" id="newPlaylistName" placeholder="Enter new playlist name">
        <button onclick="createNewPlaylist()">Create New Playlist</button>
        <button>Save Playlist</button>
        <select id="playlistSelector">
            
        </select>
        <table>
            <thead>
                <tr>
                    <th>Artist</th>
                    <th>Song Title</th>
                    <th>Play</th>
                    <th>Remove from Playlist</th>
                    <th>Add to Queue</th>
                    <th>Like/Favorite</th>
                </tr>
            </thead>
            <tbody id="playlistList">
                
            </tbody>
        </table>
    </section>-->
</div>


    <!-- Queue -->
    <section id="queueSection card">
        <h2>Queue</h2>
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>Artist</th>
                    <th>Song Title</th>
                    <th>Play</th>
                    <th>Remove from Queue</th>

                </tr>
            </thead>
            <tbody id="queueList">
                <!-- Songs will be populated from the queue array here -->
            </tbody>
        </table>
        <button id="queueButton" onclick="playQueue()">Play Queue</button>
        <button onclick="nextSongInQueue()">Next Song</button>
    </section>
    <style>
        .lilFloatButton {
            font-size: 12px;
            border-style: solid;
            border-color: white;
        }
    </style>


    <div id="player" class="floatPlayer ">
        <!-- MAKE ONE LINE ON DESKTOP + ONE LINE ON MOBILE-->
        <div id="topControlsWrap">
            <div id="topControls-line-1">
                <button onclick="previousSong()" title="Previous Song"><i class="fas fa-step-backward"></i></button>
                <button onclick="playPauseSong()" id="playPauseButton" title="Play/Pause Song"><i
                        class="fas fa-play"></i></button>
                <button onclick="nextSong()" title="Next Song"><i class="fas fa-step-forward"></i></button>
            </div>
            <div id="topControls-line-2">
                <button onclick="rewindAudio()" title="Rewind 16 seconds"><i class="fas fa-undo"></i> 16s</button>
                <button onclick="fastForwardAudio()" title="Fast Forward 16 seconds"><i class="fas fa-redo"></i>
                    16s</button>
                <button id="muteButton" title="Mute/Unmute"><i class="fas fa-volume-mute"></i></button>
            </div>
        </div>
        <div id="currentSongDisplay" onclick="playPauseSong()" title="Play/Pause Song">Now Playing: <span
                id="currentArtist"></span> - <span id="currentSong"></span></div>
        <div id="progressBar" title="Song Progress">
            <div id="progressThumb"></div>
        </div>

        <style>
            #bottomControls {
                padding-top: 10px;
                /* Adjust as needed */
            }
        </style>

        <div id="bottomControls">
            <audio id="audioPlayer" src="" ontimeupdate="updateProgressBar()"></audio>
            <button onclick="toggleSections()" title="Toggle View"><i class="fas fa-exchange-alt"></i> Toggle</button>

            <button class="lilFloatButton" onclick="addToPlaylist(currentSongIndex)" title="Add to Playlist"><i
                    class="fas fa-plus"></i></button>
            <button class="lilFloatButton" onclick="likeSong(currentSongIndex)" title="Like Current Song"><i
                    class="fas fa-heart"></i></button>

            <button onclick="shareCurrentSong()" title="Share Current Song"><i class="fas fa-share"></i> Share</button>
            <button id="castB"><i class="fas fa-tv"></i></button>
            <button onclick="toggleGames()" title="Toggle Games">Games</button>

        </div>
        <button id="shuffleButton"><i class="fas fa-dice"></i></button>

        <button id="queueButton1" onclick="playQueue()">Play Queue</button>
         <button
            id="saveArtist">Save Artist</button><button onclick="togglePlayer()">Mini Player</button>

    </div>

    <!-- MINI PLAYER-->
    <div id="miniPlayer" style="display: none;">
        <div id="miniSongDisplay">Now Playing: <span id="minicurrentArtist"></span> - <span id="minicurrentSong"></span>
        </div>
        <button onclick="playPauseSong()" id="miniPlayPauseButton" title="Play/Pause Song"><i
                class="fas fa-play"></i></button>
        <button onclick="nextSong()" id="miniNextButton" title="Next Song"><i class="fas fa-forward"></i></button>
        <button onclick="addToPlaylist()" id="miniAddToPlaylistButton" title="Add to Playlist"><i
                class="fas fa-plus"></i></button>
        <button onclick="togglePlayer()">Maximize Player</button>
    </div>


    <!-- GAMES BABY GAMES -->
      <!-- DISPLAY THE GAME MODULES-->


      <script>
function toggleGames() {
    const gameWidget = document.getElementById('gameWidget');
    const toggleSections = document.querySelectorAll('.toggle-section');

    if (gameWidget.style.display === "none") {
        gameWidget.style.display = "block";
        toggleSections.forEach(section => section.style.display = "none");
    } else {
        gameWidget.style.display = "none";
        toggleSections.forEach(section => section.style.display = "block");
    }
}
    </script>
    <div id="gameWidget" style="display: none;">
        <!-- Your games HTML goes here -->
 
    <div class="game-module-full">
        <div class="game-select-container">
            <div class="gameItem" id="game1" onclick="location.href='../games/console/tetris/tetris.html';">
                <h1>Tetris</h1>
            </div>
            <div class="gameItem" id="game2">
                <h1>Galaga</h1>
            </div>
            <div class="gameItem" id="game3">
                <h1>Frogger</h1>
            </div>
        </div>
    </div>


</div>






    <!-- END OF GAME MODULES-->
    <!-- 
<div id="playerStats" class="playerStats">
    <p>Player Stats</p>
</div>-->

    <!-- MUSIC VIZ-->
    <div id="musicVisualizer" style="display: none;">
        <!-- Your visualizer will go here -->
        Music Visualizer Placeholder
        <canvas id="canvas"></canvas>
    </div>
    <!-- END OF MUSIC VIZ-->

    <!-- ARTIST PREVIEW MODULE -->
    <!-- Add this modal code to your HTML file -->
    <div id="artistModal" class="modal">
        <div class="modal-content">
            <span id="closeModal">&times;</span>
            <iframe id="artistProfile" src="" width="100%" height="500px"></iframe>
        </div>
    </div>
    <!-- End of Artist Preview-->

    <div id="castPopup" class="popup hidden">
        <h3>Cast to a device</h3>
        <p>Choose a device baby</p>
        <!-- Device list will be populated here -->
        <ul id="deviceList"></ul>
        <button id="closeCastPopup">Close</button>
    </div>

    <div class="themeButtons">
        <button onclick="changeTheme('dark')">Dark Theme</button>
        <button onclick="changeTheme('white')">White Theme</button>
        <button onclick="changeTheme('blue')">Blue Theme</button>
    </div>
    <footer>
        <div style="display: flex; justify-content: center;">
            <a href="https://ahoy.ooo"><img src="../assets/u_ahoy23.png" style="width:300px"></a>
        </div>

        <!-- ADD THE LEGEND -->
        <!-- <div class="legend"><p>Legend</p>
    <div class="legend-item">
        <span class="legend-color new-song"></span>
        <span class="legend-label">New Songs</span>
    </div>

</div>-->


    </footer>



    <!-- END OF HTML -->
    <!-- THIS NEEDS TO GO BEFORE PROGRESS BAR (l5.js)-->
    <script src="l5.js"></script>
    <!-- THIS NEEDS TO GO BEFORE PROGRESS BAR (l5.js)-->
    <script>
        // Add an event listener to the progress bar
        const progressBar = document.querySelector("#progressBar div");
        progressBar.addEventListener("click", (e) => {
            const progressBarRect = progressBar.getBoundingClientRect();
            const clickX = e.clientX - progressBarRect.left;
            const progressBarWidth = progressBarRect.width;

            // Calculate the percentage of the clicked position
            const percentage = (clickX / progressBarWidth) * 100;

            // Update the audio player's current time based on the percentage
            const newTime = (percentage / 100) * audioPlayer.duration;
            audioPlayer.currentTime = newTime;
        });

        // Update the progress bar continuously
        audioPlayer.addEventListener("timeupdate", updateProgressBar);



    </script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            populateSongs();

            // This function will execute after the song list is populated
            const urlParams = new URLSearchParams(window.location.search);
            const songId = urlParams.get('songId');

            if (songId) {
                const songIndex = songs.findIndex(s => s.id == songId);
                if (songIndex !== -1) {
                    playSongFromList(songIndex);
                }
            }
        });


    </script>
    <!-- DISPLAY MINI PLAYER BY DEFAULT ON MOBILE-->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            if (window.innerWidth <= 768) {
                document.getElementById('player').style.display = 'none';
                document.getElementById('miniPlayer').style.display = 'block';
            }
        });
    </script>
    <script src="feature_featureSongTable.js"></script>
    <script src="function_changeTheme.js"></script>
    <script src="viz2.js"></script>
</body>

</html>