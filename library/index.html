<!DOCTYPE html>
<html>
<head>
	<title>Ahoy Indie Media - Library</title>
	<link rel="stylesheet" href="./library-5.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Ahoy Indie Media is a music library and playlist creator.">
	<meta name="keywords" content="Music, Indie, Playlist, Library">
	<meta name="author" content="Your Name">
	<script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
	<link rel="stylesheet" href="./mobile.css">
	<link rel="stylesheet" href="./library-switch.css">
	<link rel="stylesheet" href="../css/membership.css">
</head>

<body>
	<p style="text-align:center;">WARNING THIS FEATURE IS IN ACTIVE DEVELOPMENT AND IN SUPER BETA MODE</p>
	<div id="songSearchApp">
		<div class="container">
			<div class="column left">
				<!-- Insert your left column content here -->
				<!-- THE START OF SOMETHING GREAT -->
				<div class="tinyMenu-wrap" style="display:flex;">
					<a href="../index.html"><img class="topYoLogo" src="../assets/u_ahoy23.png" width="143"
							height="auto;">
					</a>
					<div class="switch-widget-wrapper">
						<input id="dn" type="checkbox" onclick="muteUnmuteAudio()" />
						<label class="toggle" for="dn">
							<span class="toggle--handler"></span>
						</label>
					</div>
				</div>

				<!-- oooo -->
				<!-- PLAYLIST CODE BABY -->

				<div class="playlist-container">
					<div class="playlistHeader">
						<h2>Playlists</h2>
					</div>
					<input type="text" id="newPlaylistName" placeholder="Playlist name...">
					<button class="glass-button" @click="createPlaylist()">Create Playlist</button>
					<select class="select" v-model="selectedPlaylist" id="playlistSelect">
						<option v-for="(value, key) in playlists" :value="key">{{key}}</option>
					</select>

					<div id="playlists">
						<div v-for="(playlist, playlistName) in playlists">
							<h3>{{playlistName}}</h3>
							<ul>
								<li v-for="song in playlist">{{song.songTitle}} by {{song.artist}}</li>
							</ul>
							<button class="glass-button" @click="playPlaylist()">Play Playlist</button>
							<a href="../burn/index.html"> <button class="glass-button">Burn Playlist to Disc</button></a>
						</div>
					</div>

					<!-- oooo -->
				</div>



			</div>
			<div class="column middle" id="library-module">
				<!-- Insert your middle column content here -->

				<!-- CONTENT -->
				<!-- SEARCHBAR -->
				<div class="search-container">
					<input type="text" v-model="searchTerm" @input="searchSongs"
						placeholder="Search the library for songs..." class="search-input">
				</div>
				<table class="library-table">
					<style>
						.table-header {
							width: 1fr;
							text-align: left;
							color: red !important;
						}
					</style>
					<thead>
						<tr>
							<th class="table-header" style="color:rgb(148, 167, 255); text-align:left;">Artist</th>
							<th class="table-header" style="color:rgb(148, 167, 255); text-align:left;">Song Title</th>
							<!--<th class="table-header">Play</th>-->
						</tr>
					</thead>
					<tbody>
						<tr v-for="song in filteredSongs" :key="song.songTitle">
							<td>
								<p class="song-artist" @click="togglePlay(song)">{{ song.artist }}</p>
							</td>
							<td>
								<p class="song-title" @click="togglePlay(song)">{{ song.songTitle }}</p>
							</td>
							<td><!-- <img :src="song.artistThumbnail" alt="Artist Thumbnail">--></td>
							<td><!-- <img :src="song.albumArtwork" alt="Album Artwork">--></td>

							<td><button id="add" class="add-button" @click="addToPlaylist(song)">Add</button></td>

							<td><button class="play-button" @click="togglePlay(song)">{{ song.play ? 'Pause' : 'Play'
									}}</button></td>

						</tr>
					</tbody>
				</table>
	
				
			</div>

			<div class="column right">
				<!-- Insert your right column content here -->
				<!-- ooo -->
				<!-- SUPER AUDIO - NOW PLAYING -->
				<div class="superAudio">
					<audio id="audioPlayer">
						<source src="path_to_audio_file.mp3" type="audio/mpeg">
						Your browser does not support the audio element. We do - and want to get this resolved - if this
						issue still persits - use a normal browser like a normie
					</audio>
					<div class="controls" style="display: flex; align-items: center;">
						<div>
							<p class="now-playing-text">Now Playing:</p>
						</div>
					</div>
					<div>
						<h2>{{ currentArtist }}</h2>
					</div>
					<div>
						<h2>{{ currentSongTitle }}</h2>
					</div>
					<button @click="togglePlay"></button>
					<div class="progress-container" style="flex-grow: 1;">
						<div class="progress"></div>
					</div>
					<div id="musicTweakerController">
						<button class="player-glass-button" @click="addToPlaylist(song)">Add to Playlist </button>

						<!-- Audio Controls -->
						<button class="player-glass-button" onclick="playAudio()">Play</button>
					
						<button class="player-glass-button" onclick="stopAudio()">Stop</button>

						<div style="display: flex; flex-direction: column;">

							<!-- VOLUME CONTROLLER -->
							<div class="volume-control">
								<label for="volume">Volume:</label>
								<input type="range" id="volume" name="volume" min="0" max="1" step="0.01" value="1"
									oninput="setVolume(this.value)">
							</div>
							<div id="progressBarContainer" style="width: 100%; background-color: #f3f3f3;">
								<div id="progressBar" style="height: 20px; background-color: #4CAF50;"></div>
							</div>
						</div>

						<!-- BASS CONTROLLER -->
					</div>
				</div>
			</div>
		</div>
		<!-- ooo -->

	</div>
	<style>
		#getOnWrap {
			position: relative;
			bottom: 0;
			left: 0;
			width:100%;
			display:flex;
			justify-content: flex-start;
			margin-bottom:20px;
			margin-right:20px;
		}
		.glass-button {
			text-decoration: none;
		}
	</style>
	<!-- GET ON AHOY BUTTON -->
	<div id="getOnWrap">
		<a href="../getOn/index.html" class="glass-button">Get on Ahoy</button></a>
	</div>
	<!-- START OF MEMBER APP -->
	<!--
	<div id="memberApp">
		<div class="memberIcon">
			MemberName
		</div>
	</div>-->
	<!-- END OF MEMBER APP-->



	<!-- END OF TOTAL HTML APP -->
	</div>
	<!-- NO MORE HTML AFTER THIS POINT -->

	<!-- SCRIPTS -->


	<!-- MUTE AUDIO SWITCH CODE -->
	<script>
		function muteUnmuteAudio() {
			var audioPlayer = document.getElementById('audioPlayer');
			audioPlayer.muted = !audioPlayer.muted;
		}
	</script>

	<script>
		// Audio context
		const audioContext = new AudioContext();

		// Audio source
		let audioSource = null;

		// Play audio
		function playAudio() {
			if (audioSource) {
				audioSource.disconnect();
			}
			audioSource = audioContext.createBufferSource();
			fetch('path/to/audio/file.mp3') // replace with your audio file
				.then(response => response.arrayBuffer())
				.then(data => audioContext.decodeAudioData(data))
				.then(buffer => {
					audioSource.buffer = buffer;
					audioSource.connect(delayNode);
					audioSource.start();
				})
				.catch(err => console.error(err));
		}

		// Pause audio
		function pauseAudio() {
			// Pause functionality is a bit more complicated in Web Audio API
			// You might have to implement custom logic to pause and resume
		}

		// Stop audio
		function stopAudio() {
			if (audioSource) {
				audioSource.stop();
			}
		}

		// Change gain
		function changeGain(value) {
			gainNode.gain.value = value;
		}

		// Change pan
		function changePan(value) {
			pannerNode.pan.value = value;
		}

		// Change delay
		function changeDelay(value) {
			delayNode.delayTime.value = value;
		}

	// ... (Other features like Pitch Shifting, Time Stretching, Filtering, etc., can be added in a similar manner)
	</script>
	<script>
		function setVolume(volume) {
			var audioPlayer = document.getElementById('audioPlayer');
			audioPlayer.volume = volume;
		}

	</script>
	<!-- LIBRARY IMPORT -->
	<!--<script src="songSearch.js"></script>-->
	<!-- NEW LIBRARY DATA -->
	<script type="module" src="./songData.js"></script>
	<script type="module" src="./songFunction.js"></script>
	<!--BACKGROUND CHANGE -->
	<script src="../script_backgroundChange.js"></script>
</body>

</html>